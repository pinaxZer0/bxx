webpackJsonp([2,1,3,4,5,6],{84:function(e,n){"use strict";startup_param.showRecharge=!1},86:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function a(){}var c=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),u=window.tongji=t(87);document.addEventListener("gameLoaded",function(){var e=new wins.RechargeWin,n=/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.exec(navigator.userAgent);n=n?n[0]:"pc",wins.RechargeWin=function(a){function u(){return o(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this))}return r(u,a),c(u,[{key:"onInit",value:function(){var o=this;fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"rc.querymethod",inapp:startup_param.inApp,device:n}),netmsg.once("rc.querymethod",null,function(n){fairygui.GRoot.inst.closeModalWait(),o.hide();try{var i=t(89)("./"+n.method+".js")}catch(n){return e.show()}var r=new i;r.show()})}}]),u}(fairygui.Window)}),window.pay=function(e,n,t,o){return!o&&(o=a),tipon?(u.beginCharge(e,n,Math.floor(n/3),t,"测试通道"),getAjax("pf/default/pay",{orderid:e,money:n},function(n,t){return n?tipon(n.responseText).popup(o):(tipon("测试版，直接完成充值").popup(o),void u.endCharge(e,"测试通道"))})):void o()},window.share=function(){console.log("share")},window.preShareResult=function(e,n,t,o,i){console.log("shareContent",arguments)}},87:function(e,n,t){"use strict";var o=t(88);e.exports=o},88:function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(){}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=window.TDGA;a||(a={Account:o,onPageLeave:o,onReward:o,onChargeRequest:o,onChargeSuccess:o,onItemPurchase:o,onMissionBegin:o,onMissionCompleted:o,onEvent:o},a.Account.setLevel=o);var c=function(){function e(){t(this,e),this._delayOp=[],this._inited=!0}return r(e,[{key:"init",value:function(e){this._inited=!0}},{key:"_delay",value:function(e){return this._inited?void e():this._delayOp.push({f:e})}},{key:"userin",value:function(e){this._delay(function(){var n=0;if(window.cordova){var t={Android:1,"BlackBerry 10":2,browser:3,iOS:4,WinCE:5,Tizen:6,"Mac OS X":7};n=t[device.platform]||8}else"wechat"==startup_param.pf&&(n=101);a.Account({accountId:e.id,level:e.level,accountName:e.nickname,gameServer:"通用",accountType:n,gender:startup_param.sex})})}},{key:"userout",value:function(){this._delay(a.onPageLeave.bind(a))}},{key:"levelup",value:function(e){this._delay(a.Account.setLevel.bind(a.Account,e))}},{key:"reward",value:function(e,n){this._delay(a.onReward.bind(a,e,n))}},{key:"beginCharge",value:function(e,n,t,o,i){"string"==typeof t&&(i=o,o=t,t=Math.floor(n/3)),this._delay(function(){a.onChargeRequest({orderId:e,iapId:o,currencyAmount:n,currencyType:"CNY",virtualCurrencyAmount:t,paymentType:i})})}},{key:"endCharge",value:function(e,n){this._delay(function(){a.onChargeSuccess({orderId:e,paymentType:n})})}},{key:"enterGame",value:function(e){this._delay(function(){a.onMissionBegin(e.toString())})}},{key:"startGame",value:function(e,n,t){this._delay(function(){a.onItemPurchase({item:n,itemNumber:1,priceInVirtualCurrency:t}),a.onEvent(n,{})})}},{key:"endGame",value:function(e){this._delay(function(){a.onMissionCompleted(e.toString())})}},{key:"share",value:function(){this._delay(function(){a.onEvent("share",{user:{id:me.id,nickname:me.nickname}})})}},{key:"invite",value:function(e,n){this._delay(function(){a.onEvent("invite",{user:{id:me.id,nickname:me.nickname},table:{id:e,msg:n}})})}},{key:"event",value:function(e,n){this._delay(function(){a.onEvent(e,"object"==("undefined"==typeof n?"undefined":i(n))?n:{data:n})})}},{key:"changeToVirtualCurrency",value:function(e,n,t,o){t=t||"金币",o=o||"钻石",this._delay(function(){var i={};i[t]=e,i[o]=n,a.onEvent("buyCoin",i)})}},{key:"consume",value:function(e,n,t){this._delay(function(){a.onItemPurchase(e,n,t)})}}]),e}(),u=new c;window.onunload=u.userout.bind(u),e.exports=u},89:function(e,n,t){function o(e){return t(i(e))}function i(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./android.js":84,"./default.js":86,"./hepay.js":90,"./inapp.js":139,"./ios.js":140,"./wechat.js":141};o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=89},90:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function a(){}function c(e,n,t){t=t||"post";var o=document.createElement("form");o._submit_function_=o.submit,o.setAttribute("method",t),o.setAttribute("action",e),o.setAttribute("target","_blank");for(var i in n){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",i),r.setAttribute("value",n[i]),o.appendChild(r)}document.body.appendChild(o),o._submit_function_()}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),s=function e(n,t,o){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,t);if(void 0===i){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,o)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)},l=window.tongji=t(87);netmsg.on("rechargeComplete",null,function(e){l.endCharge(e.orderid,e.money,"和付")});var p=t(91),d=["",20,50,100,180,240,300];e.exports=function(e){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"hepay_recharge"))}return r(n,e),u(n,[{key:"onInit",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onInit",this).call(this);var e=this.contentPane,t=e.getChild("n93");t.getChild("n108").onClick(this,this.doAlipay),this.makeButtonsRunning(t);var o=e.getChild("n118");o.getChild("n108").onClick(this,this.doQQwap),this.makeButtonsRunning(o)}},{key:"makeButtonsRunning",value:function(e){var n=e.getController("c1"),t=e.getChild("n95");t.on("input",null,function(){n.selectedIndex=0}),n.on("fui_state_changed",null,function(){t.text=d[n.selectedIndex]})}},{key:"doAlipay",value:function(){var e=(this.contentPane,Number(this.contentPane.getChild("n93").getChild("n95").text));if(e<20)return this.contentPane.getChild("n93").getChild("n95").text="20",tipon("最少充值20元").popup();var n=[20,30,40,50,60,80,90,100,120,140,150,160,180,200,210,220,240,250,260,270,280,300],t=n.findIndex(function(n){return n>=e});return t<0?(this.contentPane.getChild("n93").getChild("n95").text=""+n[n.length-1],tipon("支付宝每次最多充"+n[n.length-1]+"元").popup()):n[t]!=e?t>0?(this.contentPane.getChild("n93").getChild("n95").text=""+n[t],tipon("支付宝不能充"+e+"元，但是可以充"+n[t-1]+"或"+n[t]+"元").popup()):alert("you should never see this msg"):(fairygui.GRoot.inst.showModalWait(),void getAjax("/createOrder",{userid:me.id,packid:"userdefine",rmb:e},function(e,n){return fairygui.GRoot.inst.closeModalWait(),e||n.err?tipon(e||n.err).popup():f(n.orderid,n.money,"userdefine",0)}))}},{key:"doQQwap",value:function(){var e=Number(this.contentPane.getChild("n118").getChild("n95").text);return e<10?(this.contentPane.getChild("n118").getChild("n95").text="10",tipon("最少充值10元").popup()):(fairygui.GRoot.inst.showModalWait(),void getAjax("/createOrder",{userid:me.id,packid:"userdefine",rmb:e},function(e,n){return fairygui.GRoot.inst.closeModalWait(),e||n.err?tipon(e||n.err).popup():f(n.orderid,n.money,"userdefine",2)}))}}]),n}(p.Win);var f=function(e,n,t,o,i){return!i&&(i=a),l.beginCharge(e,n,t,"和付"),fairygui.GRoot.inst.showModalWait(),getAjax("/pf/hepay/sign",{orderid:e,money:n,type:o},function(e,n){return e?(fairygui.GRoot.inst.closeModalWait(),tipon&&tipon(e.responseText).popup(i)):(delete n.result,c("http://hf.qzwygl.cn/biz_inter_sys/services/wap/pay",n),setTimeout(function(){fairygui.GRoot.inst.closeModalWait()},4e3),void i())})}},139:function(e,n,t){"use strict";t(90)},140:function(e,n,t){"use strict";startup_param.showRecharge=!0;var o=t(21);if(window.store){var i=function(e,n,t,o){tongji.beginCharge(e,r[e].actureMoney,r[e].actureCoins,t,"苹果商店支付"),store.order(e)},r={low:{bundle:"com.1357g.niuniu.5tickets"},middle:{bundle:"com.bjl2000.bacc.middleprice"},high:{bundle:"com.bjl2000.bacc.highprice"}};for(var a in r)store.register({id:r[a].bundle,alias:a,type:store.CONSUMABLE}),store.when(a).updated(function(e){console.log(a,"price",e.price),r[a]=o(r[a],e),"invalid"!=e.state&&(r[a].actureMoney=Number(e.price.substr(1)),r[a].actureCoins=e.description.substr(e.description.indexOf("=")+1))}).approved(function(e){e.verify()}).verified(function(e){if(console.log("finally",e),!appleOrderid)return appleOrderCb&&appleOrderCb("appleOrderid was not set");var n={actureMoney:r[a].actureMoney,orderid:appleOrderid,receipt:e.transaction.appStoreReceipt};getAjax("/pf/apple/pay",n,function(n,t){n=n||t.err,n?(console.log(n,t),tipon(n).popup()):tipon("购买成功").popup(),e.finish(),tongji.endCharge(appleOrderid,"苹果商店支付");var o=appleOrderCb;appleOrderCb=null,o&&o()})}).cancelled(function(e){var n=appleOrderCb;appleOrderCb=null,n&&n()});store.validator=function(e,n){console.log("verify",e),n(!0)},store.error(function(e){console.log(e)}),store.refresh();var c=async.queue(function(e,n){"function"==typeof e?e(n):n()});window.pay=function(e,n,t,o){!o&&(o=_noop),c.push(i.bind(null,e,n,t),o)}}else alert("cc.fovea.cordova.purchase not installed")},141:function(e,n,t){"use strict";function o(){}function i(e){var n="";return e[10]&&(n+="五小牛 "),e[7]&&(n+="四炸牛 "),e[5]&&(n+="五花牛 "),e[4]&&(n+="四花牛 "),n=0==n.length?"不带牛牛以上的牌型":"带"+n}function r(e){function n(e){wx.stopRecord({success:function(n){e(null,n)},fail:function(n){e(n)}})}var t=u.timeout(n,800);t(e)}function a(){wx.onVoicePlayEnd({success:function(e){var n=p[e.localId];console.log(e),"function"==typeof n.cb&&(n.cb(),delete p[e.localId])}}),setInterval(function(){var e=new Date;for(var n in p){var t=p[n];e-t.t>=3e3&&(t.cb&&t.cb(),delete p[n])}},3e3)}var c=window.tongji=t(87);window.preInvite=function(e,n){if(window.wechatObj){var t={type:"link",title:"牛牛大作战，房号:"+e+"("+n.pan+"局)",link:"http://h5.1357g.com/g/niuniu.app?room="+e,imgUrl:location.origin+location.pathname+"res/logo.png",desc:"轮庄，"+i(n.rule)+", "+n.dizhu+"底！"};window.wechatObj.shareOnChat(t),window.wechatObj.shareOnMoment(t),window.invite=function(){var t="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，邀请好友加入游戏";tipon(t).popup(),c.invite(e,"轮庄，"+i(n.rule)+", "+n.dizhu+"底！")}}},window.invite=function(){var e="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，邀请好友加入游戏";tipon(e).popup()},window.share=function(){var e="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，分享到朋友圈";tipon(e).popup(),c.share()},window.preShareResult=function(e,n,t,o,i){var r={type:"link",title:"牛牛大作战，房号:"+e+(null!=n?", 第"+n+"局":""),link:"http://h5.1357g.com/g/niuniu.app"+i,imgUrl:"http://h5.1357g.com/g/niuniu.app"+i,desc:(t||[]).join(",")+" 胜利者 "+(o||[]).join(",")};window.wechatObj.shareOnChat(r),window.wechatObj.shareOnMoment(r)},window.pay=function(e,n,t,i){!i&&(i=o),c.beginCharge(e,n,t,"微信公众号支付"),getAjax("weixin/getWechatpayParams",{order:e,money:n,openid:startup_param.openid},function(n,t){return n||t.err?tipon(n||t.err).popup():(t.success=function(n){"chooseWXPay:ok"==n.errMsg?(c.endCharge(e,"微信公众号支付"),i(null,!0)):i(null,!1)},void wx.chooseWXPay(t))})};var u=t(18),s=u.queue(function(e,n){return"function"==typeof e?e(n):void n()}),l={starting:!1,stopping:!1};window.startRecord=function(e){return l.starting?e(l.starting):(l.starting=!0,void s.push([function(n){wx.startRecord({fail:function(n){e(n),e=null},sucess:function(){}}),n()},function(e){setTimeout(e,500)},function(n){l.starting=!1,e&&e(l.starting),n()}]))},window.stopRecord=function(e){return l.stopping?e("already stopping"):(l.stopping=!0,void s.push(r,function(n,t){if(l.stopping=!1,e)return n?e(n):void window.sendRecord(t.localId,e)}))},window.sendRecord=function(e,n){wx.uploadVoice({localId:e,isShowProgressTips:0,success:function(e){var t=e.serverId;n(null,t)}})};var p={};window.playRecord=function(e,n){wx.downloadVoice({serverId:e,isShowProgressTips:0,success:function(e){var t=e.localId;wx.playVoice({localId:t}),p[t]={cb:n,t:new Date}}})},accWechatIntf("weixin/sign",{},function(e,n){if(e)return console.log(e);var o=t(142);n.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"],n.success=function(){window.wxInit&&window.wxInit()};window.wechatObj=new o(n)}),window.wxInit=function(){function e(){var e=setInterval(function(){wx.stopRecord({success:function(n){clearInterval(e)}})},300)}var n={type:"link",title:"牛牛大作战，大家来斗牛",link:location.origin+location.pathname,imgUrl:location.origin+location.pathname+"res/logo.png",desc:""};try{window.wechatObj.shareOnChat(n),window.wechatObj.shareOnMoment(n)}catch(e){console.log(e)}wx.startRecord(),e(),a()}},142:function(e,n){/*!
	 * @license MIT
	 * Client side js to use wechat-jssdk, also works with other server side service.
	 * https://github.com/JasonBoy/wechat-jssdk
	 */
"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=window.document,r=window.location,a=r.protocol+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",c=["onMenuShareTimeline","onMenuShareAppMessage"],u=function(){function e(n){if(t(this,e),this instanceof e){this.config=n||{},this.config.customUrl&&(a=this.config.customUrl,delete this.config.customUrl);var o=this.config.jsApiList;if(!o||o.length<=0)this.config.jsApiList=c;else for(var i=0,r=c.length;i<r;i++){var u=c[i];o.indexOf(u)<0&&o.push(u)}return this.debug=!!this.config.debug,this.loadScript(),this}return new e(n)}return o(e,[{key:"signSignature",value:function(e){var n=this,t=this.config,o=e||t,i={debug:this.debug,appId:t.appId,timestamp:o.timestamp||t.timestamp,nonceStr:o.nonceStr||t.nonceStr,signature:o.signature||t.signature,jsApiList:t.jsApiList.slice(0,t.jsApiList.length)},r=this.debug;if(!window.wx)return console.warn("wechat js not defined"),this;var a=window.wx;return a.config(i),a.ready(function(){console.log("sign signature finished..."),r&&alert("sign signature finished..."),o.success&&o.success.call(n)}),a.error(function(e){r&&alert("sign error: "+JSON.stringify(e)),o.error&&o.error.call(n,e)}),this.wx||(this.wx=a),this}},{key:"loadScript",value:function(){var e=this,n=i.createElement("script");n.type="text/javascript",n.async=!0,n.onload=function(){console.log("Wechat script loaded successfully!"),e.signSignature()},n.onerror=function(n){console.error("Failed to load wechat script!"),console.error(n),e.debug&&alert("Cannot load wechat script!")};var t=i.getElementsByTagName("script")[0];return t.parentNode.insertBefore(n,t),n.src=a,this}},{key:"shareOnMoment",value:function(e){return e?this.callWechatApi("onMenuShareTimeline",e):this}},{key:"shareOnChat",value:function(e){return e?this.callWechatApi("onMenuShareAppMessage",e):this}},{key:"callWechatApi",value:function(e,n){if(!e)return this;var t=this.debug;if(this.config.jsApiList.indexOf(e)<0)return t&&alert("the wechat api ["+e+"] you call was not registered, \npls add the api into your [jsApiList] config"),this;var o=this.wx[e];return o&&"function"==typeof o?(o(n),this):(t&&alert("no such api ["+e+"] found!"),this)}}]),e}();e.exports=u}});